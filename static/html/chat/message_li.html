<li id="chat-{{ .ChatId }}-msg-{{ .MsgId }}"
    sse-swap="{{ .MessageDropEvent }}"
    hx-target="#chat-{{ .ChatId }}-msg-{{ .MsgId }}"
    hx-swap="innerHTML" 
    class="chat-message-li default-transition
        flex flex-row justify-between
        p-2
        m-2
        h-fit
        gap-1
        shadow
        {{ if eq .AuthorId .ViewerId }}
            ml-[17%]
            border-b-4 border-green-700 rounded-lg
            shadow shadow-green-800
        {{ else }}
            mr-[17%]
            border-b-4 border-indigo-700 rounded-lg
            shadow shadow-green-800
        {{ end }}
        hover:shadow-green-500
        hover:text-green-500">
    <div class="chat-message-content flex flex-row overflow-hidden">
        <div class="w-[1.5em] h-[1.5em] ml-0 mr-1">
            {{ template "avatar_div.html" .AuthorAvatar }}
        </div>
        <div class="mr-0">
            [{{ .AuthorName }}]
        </div>
        <div>&nbsp;</div>
        <div class="break-all">
            {{ .Text }}
        </div>
    </div>
    <div class="chat-msg-options flex ml-auto">
        <sup title="respond to this message" 
            hx-get="/message/quote?chatid={{ .ChatId }}&msgid={{ .MsgId }}" 
            hx-trigger="click" 
            hx-swap="beforebegin" 
            hx-target="#chat-{{.ChatId}}-msg-form"
            class="hover:text-green-800">
            [reply]
        </sup>
        {{ if or (eq .AuthorId .ViewerId) (eq .OwnerId .ViewerId) }}
        <sup title="delete this message" 
            hx-post="/message/delete?chatid={{ .ChatId }}&msgid={{ .MsgId }}"
            DISABLED-hx-vals='{"chatId":"{{ .ChatId }},"msgId":"{{ .MsgId }}"}'
            hx-trigger="click" 
            hx-swap="innerHTML" 
            hx-target="#chat-{{ .ChatId }}-msg-{{ .MsgId }}"
            class="hover:text-amber-700">
            [delete]
        </sup>
        {{ end }}
    </div>
</li>