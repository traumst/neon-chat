<!-- originally provided to work with message_submit_div -->
<input id="quote-chat-{{ .ChatId }}-msg-{{ .MsgId }}" 
    type="hidden" 
    name="quoteid" 
    value="{{ .MsgId }}"
    class="quote-chat-msg-input" />
<div id="quote-chat-{{ .ChatId }}-msg-{{ .MsgId }}-{{ .IntermediateId }}" 
    onclick="scrollIntoView('#chat-{{ .ChatId }}-msg-{{ .MsgId }}')"
    class="quote-chat-message
        flex flex-col 
        ml-auto 
        w-[80%] 
        bg-opacity-10 bg-slate-500
        border-2 border-black rounded-lg">
    <i class="ml-0">replying to...</i>
    <div class="chat-message-content  ml-3 flex flex-row overflow-hidden">
        <div class="w-[1.5em] h-[1.5em] ml-0 mr-1">
            {{ template "avatar_div.html" .AuthorAvatar }}
        </div>
        <div class="mr-0">
            [{{ .AuthorName }}]
        </div>
        
        <div>&nbsp;</div>

        <div class="break-all">
            {{ .Text }}
        </div>
    </div>
</div>
<script>
(function () {
    const staleQuote = document.querySelectorAll(`.quote-chat-message`);
    console.log('removing previous quotes from chatId[{{ .ChatId }}] except for msgId[{{.MsgId}}]');
    for (i = 1; i < staleQuote.length; i++) {
        staleQuote[i].remove();
    }
    const staleQuoteIdInputs = document.querySelectorAll(`.quote-chat-msg-input`);
    console.log('removing stale inputs from chatId[{{ .ChatId }}] except for msgId[{{.MsgId}}]');
    for (i = 1; i < staleQuoteIdInputs.length; i++) {
        staleQuoteIdInputs[i].remove();
    }
})()
</script>