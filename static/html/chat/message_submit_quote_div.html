<!-- originally provided to work with message_submit_div -->
<input id="quote-chat-{{ .ChatId }}-msg-{{ .MsgId }}-input-{{ .IntermediateId }}" 
    type="hidden" 
    name="quoteid" 
    value="{{ .MsgId }}"
    class="quote-chat-msg-input opacity-100"/>
<div id="quote-chat-{{ .ChatId }}-msg-{{ .MsgId }}-{{ .IntermediateId }}" 
    hx-on:click="scrollIntoView('#chat-{{ .ChatId }}-msg-{{ .MsgId }}')"
    class="quote-chat-message
        flex flex-col 
        mr-auto
        border-b-4 border-indigo-700 rounded-lg
        shadow shadow-yellow-600
        hover:shadow-green-500
        hover:text-green-500">
    <div class="text-sm flex flex-row justify-between">
        <div class="ml-0">
            replying to...
        </div>
        <div id="close-active-quote" 
            class="hover:text-amber-700"
            hx-on:click="closeActiveQuote()">
            [X]
        </div>
    </div>
    <div class="chat-message-content flex flex-row pl-6 pr-6 pb-2">
        <div class="w-[1.5em] h-[1.5em] ml-0 mr-1">
            {{ template "avatar_div.html" .AuthorAvatar }}
        </div>
        <div class="mr-0">
            [{{ .AuthorName }}]
        </div>
        <div>&nbsp;</div>
        <div class="break-all">
            {{ .TextIntro }}
        </div>
    </div>
</div>
<script>
    function closeActiveQuote() {
        removeElements({ 
            classSelector: ".quote-chat-message", 
            idSelectorException: null
        })
        removeElements({ 
            classSelector: ".quote-chat-msg-input", 
            idSelectorException: null
        })
    }
    removeElements({ 
        classSelector: ".quote-chat-message", 
        idSelectorException: "quote-chat-{{ .ChatId }}-msg-{{ .MsgId }}-{{ .IntermediateId }}"
    })
    removeElements({ 
        classSelector: ".quote-chat-msg-input", 
        idSelectorException: "quote-chat-{{ .ChatId }}-msg-{{ .MsgId }}-input-{{ .IntermediateId }}"
    })
</script>