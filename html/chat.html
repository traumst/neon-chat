<div class="open-chat-name" style="border: 2px solid blue;">
    <h2>chat {{ .Name }}</h2>
    <p class="open-chat-users">Users: 
    {{ with $chatUsers := .Users }}
        {{ range $index, $user := $chatUsers }} 
            [{{$user}}]
        {{ end }}
    {{ end }}
    </p>
</div>

{{ if eq .Owner .User }}
<div class="invite-user" style="border: 2px solid green;">
    <form method="POST" hx-target=".open-chat-users" hx-post="/chat/invite" hx-trigger="submit" hx-swap="beforeend">
        <input type="hidden" name="chatId" value="{{ .ID }}">
        <input type="text" name="invitee" placeholder="...type invitee username here...">
        <button type="submit">Invite</button>
    </form>
</div>
{{ end }}

<hr />

<div class="open-chat-history" style="border: 2px solid gray;">
    <ul class="message-list" sse-swap="chat" hx-swap="beforeend">
        {{ with $chatMsgs := .Messages }}
            {{ range $index, $msg := $chatMsgs }} 
                {{ template "message.html" $msg }}
            {{ end }}
        {{ else }}
            <li>No messages yet</li>
        {{ end }}
    </ul>

    <form hx-post="/message" hx-trigger="submit" hx-target=".message-list" hx-swap="beforeend">
        <input type="hidden" name="chatId" value="{{ .ID }}">
        <input type="text" name="msg" placeholder="...type message here...">
        <button type="submit">Send</button>
    </form>
</div>